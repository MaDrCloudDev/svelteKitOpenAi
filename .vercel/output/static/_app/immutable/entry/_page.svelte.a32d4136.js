import{S as st,i as rt,s as it,k as E,a as O,q as A,Q as nt,l as x,h as f,c as k,m as I,r as R,n as p,E as v,b as L,R as X,H as T,T as at,g as D,d as H,f as K,L as $,U as ot,e as Y,v as tt,u as lt,V as ht,W as Z}from"../chunks/index.a822744d.js";function ut(l){const r=l-1;return r*r*r+1}function z(l,{delay:r=0,duration:o=400,easing:s=ut,x:t=0,y:e=0,opacity:i=0}={}){const n=getComputedStyle(l),c=+n.opacity,_=n.transform==="none"?"":n.transform,u=c*(1-i);return{delay:r,duration:o,easing:s,css:(m,d)=>`
			transform: ${_} translate(${(1-m)*t}px, ${(1-m)*e}px);
			opacity: ${c-u*d}`}}var et={};(function(l){var r=function(o,s){if(!(this instanceof r))return new r(o,s);this.INITIALIZING=-1,this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,this.url=o,s=s||{},this.headers=s.headers||{},this.payload=s.payload!==void 0?s.payload:"",this.method=s.method||this.payload&&"POST"||"GET",this.withCredentials=!!s.withCredentials,this.FIELD_SEPARATOR=":",this.listeners={},this.xhr=null,this.readyState=this.INITIALIZING,this.progress=0,this.chunk="",this.addEventListener=function(t,e){this.listeners[t]===void 0&&(this.listeners[t]=[]),this.listeners[t].indexOf(e)===-1&&this.listeners[t].push(e)},this.removeEventListener=function(t,e){if(this.listeners[t]!==void 0){var i=[];this.listeners[t].forEach(function(n){n!==e&&i.push(n)}),i.length===0?delete this.listeners[t]:this.listeners[t]=i}},this.dispatchEvent=function(t){if(!t)return!0;t.source=this;var e="on"+t.type;return this.hasOwnProperty(e)&&(this[e].call(this,t),t.defaultPrevented)?!1:this.listeners[t.type]?this.listeners[t.type].every(function(i){return i(t),!t.defaultPrevented}):!0},this._setReadyState=function(t){var e=new CustomEvent("readystatechange");e.readyState=t,this.readyState=t,this.dispatchEvent(e)},this._onStreamFailure=function(t){var e=new CustomEvent("error");e.data=t.currentTarget.response,this.dispatchEvent(e),this.close()},this._onStreamAbort=function(t){this.dispatchEvent(new CustomEvent("abort")),this.close()},this._onStreamProgress=function(t){if(this.xhr){if(this.xhr.status!==200){this._onStreamFailure(t);return}this.readyState==this.CONNECTING&&(this.dispatchEvent(new CustomEvent("open")),this._setReadyState(this.OPEN));var e=this.xhr.responseText.substring(this.progress);this.progress+=e.length,e.split(/(\r\n|\r|\n){2}/g).forEach(function(i){i.trim().length===0?(this.dispatchEvent(this._parseEventChunk(this.chunk.trim())),this.chunk=""):this.chunk+=i}.bind(this))}},this._onStreamLoaded=function(t){this._onStreamProgress(t),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk=""},this._parseEventChunk=function(t){if(!t||t.length===0)return null;var e={id:null,retry:null,data:"",event:"message"};t.split(/\n|\r\n|\r/).forEach(function(n){n=n.trimRight();var c=n.indexOf(this.FIELD_SEPARATOR);if(!(c<=0)){var _=n.substring(0,c);if(_ in e){var u=n.substring(c+1).trimLeft();_==="data"?e[_]+=u:e[_]=u}}}.bind(this));var i=new CustomEvent(e.event);return i.data=e.data,i.id=e.id,i},this._checkStreamClosed=function(){this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE&&this._setReadyState(this.CLOSED)},this.stream=function(){this._setReadyState(this.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._checkStreamClosed.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(var t in this.headers)this.xhr.setRequestHeader(t,this.headers[t]);this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)},this.close=function(){this.readyState!==this.CLOSED&&(this.xhr.abort(),this.xhr=null,this._setReadyState(this.CLOSED))}};l.SSE=r})(et);const{document:F}=ot;function Q(l){let r,o,s=l[0]&&W(l);return{c(){s&&s.c(),r=Y()},l(t){s&&s.l(t),r=Y()},m(t,e){s&&s.m(t,e),L(t,r,e),o=!0},p(t,e){t[0]?s?(s.p(t,e),e&1&&D(s,1)):(s=W(t),s.c(),D(s,1),s.m(r.parentNode,r)):s&&(tt(),H(s,1,1,()=>{s=null}),K())},i(t){o||(D(s),o=!0)},o(t){H(s),o=!1},d(t){s&&s.d(t),t&&f(r)}}}function W(l){let r,o,s,t,e,i,n,c,_,u;return{c(){r=E("div"),o=E("h2"),s=A("flirtatiousAI:"),t=O(),e=E("p"),i=A(l[2]),this.h()},l(m){r=x(m,"DIV",{class:!0});var d=I(r);o=x(d,"H2",{class:!0});var S=I(o);s=R(S,"flirtatiousAI:"),S.forEach(f),t=k(d),e=x(d,"P",{class:!0});var y=I(e);i=R(y,l[2]),y.forEach(f),d.forEach(f),this.h()},h(){p(o,"class","text-2xl font-bold text-right text-green-500 mb-1"),p(e,"class","text-2xl border rounded-2xl p-4"),p(r,"class","pt-4")},m(m,d){L(m,r,d),v(r,o),v(o,s),v(r,t),v(r,e),v(e,i),c=!0,_||(u=[T(r,"introstart",l[5]),T(r,"outrostart",l[6]),T(r,"introend",l[7]),T(r,"outroend",l[8])],_=!0)},p(m,d){(!c||d&4)&&lt(i,m[2])},i(m){c||(ht(()=>{n||(n=Z(r,z,{x:200,duration:2e3},!0)),n.run(1)}),c=!0)},o(m){n||(n=Z(r,z,{x:200,duration:2e3},!1)),n.run(0),c=!1},d(m){m&&f(r),m&&n&&n.end(),_=!1,$(u)}}}function dt(l){let r,o,s,t,e,i,n,c,_,u,m,d,S,y,C,g,N,q,P,M,G,h=l[2]&&Q(l);return{c(){r=E("meta"),o=O(),s=E("h1"),t=A("flirtatiousAI"),e=O(),i=E("form"),n=E("label"),c=A("Introduce yourself to the bot:"),_=O(),u=E("input"),m=O(),d=E("button"),S=A("Introduce Yourself"),y=O(),h&&h.c(),C=O(),g=E("div"),N=E("a"),q=A("Read about this project!"),this.h()},l(a){const b=nt("svelte-14v2q",F.head);r=x(b,"META",{name:!0,content:!0}),b.forEach(f),o=k(a),s=x(a,"H1",{class:!0});var j=I(s);t=R(j,"flirtatiousAI"),j.forEach(f),e=k(a),i=x(a,"FORM",{class:!0});var w=I(i);n=x(w,"LABEL",{class:!0,for:!0});var U=I(n);c=R(U,"Introduce yourself to the bot:"),U.forEach(f),_=k(w),u=x(w,"INPUT",{placeholder:!0,class:!0,name:!0}),m=k(w),d=x(w,"BUTTON",{type:!0,class:!0});var V=I(d);S=R(V,"Introduce Yourself"),V.forEach(f),y=k(w),h&&h.l(w),w.forEach(f),C=k(a),g=x(a,"DIV",{class:!0});var B=I(g);N=x(B,"A",{href:!0,class:!0});var J=I(N);q=R(J,"Read about this project!"),J.forEach(f),B.forEach(f),this.h()},h(){F.title="flirtatiousAI | MaDr",p(r,"name","description"),p(r,"content","A bot that flirts with you by MaDrCloudDev."),p(s,"class","text-4xl font-bold text-[#328eef] text-center"),p(n,"class","text-[#fffb00] text-xl mb-1"),p(n,"for","context"),p(u,"placeholder","e.g. Hi, I'm MaDr, I'm a developer from Arizona..."),p(u,"class","bg-black rounded-md border-[#7f7d76] border text-[#328eef] p-4"),p(u,"name","context"),p(d,"type","submit"),p(d,"class","btn mb-2 btn-black w-fit mx-auto mt-3 p-4 rounded-full border border-gray-900 text-[#7f7d76] shadow-md shadow-gray-700 hover:scale-110 ease-in duration-200 hover:text-[#fffb00] hover:border-[#328eef] hover:shadow-[#328eef] text-sm md:text-lg"),p(i,"class","flex flex-col max-w-lg w-full mx-auto overflow-hidden"),p(N,"href","https://madr.io/flirtatiousai"),p(N,"class","justify-center text-lg sm:text-xl hover:text-[#fffb00] text-[#328eef] cursor-pointer"),p(g,"class","flex justify-center mt-2")},m(a,b){v(F.head,r),L(a,o,b),L(a,s,b),v(s,t),L(a,e,b),L(a,i,b),v(i,n),v(n,c),v(i,_),v(i,u),X(u,l[1]),v(i,m),v(i,d),v(d,S),v(i,y),h&&h.m(i,null),L(a,C,b),L(a,g,b),v(g,N),v(N,q),P=!0,M||(G=[T(u,"input",l[4]),T(i,"submit",at(l[3]))],M=!0)},p(a,[b]){b&2&&u.value!==a[1]&&X(u,a[1]),a[2]?h?(h.p(a,b),b&4&&D(h,1)):(h=Q(a),h.c(),D(h,1),h.m(i,null)):h&&(tt(),H(h,1,1,()=>{h=null}),K())},i(a){P||(D(h),P=!0)},o(a){H(h),P=!1},d(a){f(r),a&&f(o),a&&f(s),a&&f(e),a&&f(i),h&&h.d(),a&&f(C),a&&f(g),M=!1,$(G)}}}function ft(){document.querySelector("input").value="",document.activeElement.blur()}function ct(l,r,o){let s=!1,t="",e=!1,i="";const n=async()=>{e=!0,o(2,i="");const S=new et.SSE("/api/flirt",{headers:{"Content-Type":"application/json"},payload:JSON.stringify({context:t})});o(1,t=""),S.addEventListener("error",y=>{e=!1,alert("Something went wrong!")}),S.addEventListener("message",y=>{try{if(e=!1,y.data==="[DONE]")return;const C=JSON.parse(y.data),[{text:g}]=C.choices;o(2,i=(i??"")+g)}catch(C){e=!1,console.error(C),alert("Something went wrong!")}}),S.stream(),ft(),o(0,s=!0)};function c(){t=this.value,o(1,t)}return[s,t,i,n,c,()=>status="intro started",()=>status="outro started",()=>status="intro ended",()=>status="outro ended"]}class pt extends st{constructor(r){super(),rt(this,r,ct,dt,it,{})}}export{pt as default};
